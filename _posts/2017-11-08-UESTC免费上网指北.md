---
layout: post
title: UESTC 免费上网指北
date: 2017-11-08 08:44
categories: IT杂记
tags: [Python, UESTC, 作死, 网络]
---
 > 本文介绍的方法可能涉及违法，我在测试结束后也没有继续使用（其实是因为自己的账户销不掉）。不提供代码，作死请自便～【滑稽】

你电免费 Wi-Fi 全覆盖，宿舍区例外；你电能试运行 5G，宿舍区的 3G/4G 卡得要命。

嗯，去办电信宽带吧～不过，总想搞事呢。

# 思路与目的

首先，认证是躲不开的，所以需要搞到别人的账号。

然后，有在线登录数限制，不能因为自己鸠占鹊巢把别人挤了。

# 起因

最开始，宿舍里的宽带是 PPPoE 拨号的，还能够多拨，于是想和别人合租。可是宿舍里慢慢改成了 Portal 验证，然后房间里有一个电信的 AP，射出 Wi-Fi 信号和有线连接。

这下就爽了，有线和无线各限制一个设备登录。合租？除非把路由器刷 OpenWrt 然后作为客户端桥接 Wi-Fi——可能要卡死。

于是就开始搞事了。

# VLAN 区分的接入方式

墙上的 AP 拆下来后，发现是一个 PoE 供电的 AP。查了一下手册，可胖可瘦。直接把网线接入电脑，会进入一个奇怪的局域网。

不同接入方式接入后进入的子网相同，Portal 认证的地址相同。根据猜测，应该是根据不同的接入方式划分了不同的 VLAN。

## 串口尝试

最初的想法是，用串口肛进 AP 拿到它的配置，不就好了。然而这个 AP 可谓是奇葩，它的串口是一个 MicroUSB 的孔。淘宝上买了转接线，可是……

毫无用处。

没有丝毫回显，无论是刚上电，还是换了各种波特率乱打。也许是串口被关了？或者我买了个假的转换器？我甚至拆开电路板看了看布线，IO 两根线是对得上，但是 IO 可能反了。不过没带电烙铁来学校，就此作罢。

## 集线器抓包法

集线器这种古老的东西，淘宝上还是有的。氪了一台二手 10 Mbps 古董，开始这种传统的抓包活动。

一开始还抓不到 VLAN Tag，还以为自己想错了。不过看到数据流量内容毫无差异，我坚信是 VLAN 实现的分流。后来发现是网卡设置的问题，默认它会把 VLAN Tag 过滤掉……

然后就抓到了有线和无线的 VLAN ID。这样就能把PoE网线直接插在软路由或者OpenWrt设备上，设置VLAN来把自己的有线模拟成无线，实现多个地点有线同时登录了。

# 默认密码之殇

默认密码是个好东西啊……哈哈哈。

因为已经办了宽带了，所以知道你电宽带的默认密码是 12345678。而登录名是手机号。

这就 interesting 了。已知密码攻击……只要扫一下手机号，不就 OK 了？号码段，问问别人就知道了。

然后简单地抓了一下 Portal 登录的数据包，用 Python 脚本扫了扫，发现也没有防暴力破解的措施……

于是扫出一堆可用的宽带账号，默认密码。就算不是默认密码，暴力破解也是挺简单的。

# 当个假ISP？渗透内网？

嗯，懂的人看到这里已经知道怎么免费上网了。只要别人不用无线，你就可以和别人和平共处。

不过关于那根 PoE 网线，还有一些疑问。PVID 进去的什么局域网？我是不是可以在那个局域网里当 ISP？这个 Trunk 口能不能进更奇怪的VLAN？

嗯……来日方长，嘛。

----------------

### 补

后来重新接了一下 USB 转 TTL 的线，能够串口上去了。
