---
layout: post
title:  "FQ 漫谈"
date:   2017-09-23 16:23:05 +0800
categories: IT杂记
tags: 翻墙
---
 > Across the Great Wall we can reach every corner in the world.
 > 
 > 越过长城，走向世界

整整三十年前，中国第一封电子邮件的内容在今日看来，却是如此讽刺。

**有墙的互联网，不是完整的互联网。**从墙的诞生之日起，前后涌现出了大批的翻墙方式。从最原始的 HTTP 代理到后来的 VPN、Shadowsocks，从另一方面看，GFW 也不愧是技术发展的动力。

在我开始翻墙的年代，HTTP 代理早就成为历史了，于是从我用过的说起。

## 过去的翻墙方式

### VPN翻墙

选择它的理由很明显：绝大多数 PC/移动操作系统都自带 VPN 客户端。还记得当年 VPS 必买 Windows 系统的，因为方便安装 VPN 服务~~（还是图形化界面爽啊）~~。Windows Server 自带的 VPN 协议有两种，PPTP 和 L2TP，安装**路由与访问策略**的角色服务稍加配置即可完成搭建。

不过现在这种传统的 VPN 已经作废了。两者的特征过于明显：端口号固定，PPTP 还需要使用不同于 TCP、UDP 的协议号以运行 GRE 协议。因此早在几年前，这些传统 VPN 就已经不能使用了。

### 修改 hosts 文件翻墙

修改 hosts 文件，也曾经是广泛使用的翻墙方式之一。通常使用外国服务商尚未被封锁的 IP，或者他人搭建分享的服务器。

它的优点很多：免费、不需配置 VPN 客户端、不必代理全局流量。但缺点也很明显：设置麻烦、时效性强、不够全面，而且在 HTTPS 普及的今天，对 IP 资源的利用率不高。

其实这种方式至今仍有人使用，不过规模已大为缩水。

### VPNGate

很久没有上过 QQ 邮箱，不知以前订阅的 VPNGate 镜像服务器邮件是否还在发送。

VPNGate 也算一个不错的翻墙工具，其服务器来自于全球各地的志愿者，用户也是来自全球各地：不止天朝人民，还有伊朗人民等难兄难弟。

VPNGate 的好处在于不愁服务器：无须购买，无须搭建。另一个好处是其基于 OpenVPN，而 OpenVPN 的跨平台能力也是很强的。可是这也给它带来了灾难： OpenVPN 的特征虽然不及 PPTP、L2TP 强，但还是在几年前被成功识别，进而其速度也越来越慢。另外，志愿者的服务器不稳定，每次翻墙可能都需要找新的服务器，这也是其式微的原因之一吧。

不过 OpenVPN 并非毫无用处——下文中它会浴火重生。

## 当下的翻墙方式

### Shadowsocks

在我看来，SS 可谓是这个时代最伟大的发明之一。它的轻量级、弱特征、跨平台特性使其成为了当前最火的翻墙工具。

话不必多说，SS 的好处用过的人都知道。要使用 SS，个人搭建的话，需要一台 Linux 服务器~~（我知道 Windows 可以，就是不用）~~，推荐 Debian 系的操作系统，deb 包已经封装得很好了，自带自启服务，可谓开箱即用。

#### 其他姿势：路由器上开 SS+ChinaDNS 实现无缝翻墙

想让整个局域网里的设备自动翻墙？只需要在路由器上刷入 OpenWRT 系统，然后安装 SS 客户端、配置好 iptables 规则、装上 ChinaDNS 反 DNS 污染即可。具体的教程网上都有，就不说了……

### 国内跳板+SS

其实本质还是 SS，但是加入了一个国内跳板。基本原理是通过常规 VPN（PPTP、L2TP、OpenVPN）连接到一个国内服务器，然后在服务器上进行分流：境外流量走 SS，境内流量直接由服务器代理出去。

这样看似境内流量反而绕了路，但是好处如下：

 - 实现内网访问。翻墙的同时可以进入服务器所在的内网进行管理。
 - 方便 iOS 用户。当下 iOS 系统尚没有很好的 SS 客户端（据说有但是是收费的……？），而 OpenVPN 的客户端是有的（虽然在国区被下架了，需要到其他区下）。
 - 方便 Windows 用户。出于 Windows 本身的限制，Windows 下的 SS 客户端默认是基于 URL 代理的，而且是 Socks5 代理。这样一来被墙的网址可能被遗漏，二来非浏览器并非全部支持 Socks5 代理，支持也需要额外设置。

因为 PPTP、L2TP 在防火墙难以在防火墙的 NAT 后访问，所以我使用的是 Softether VPN（和 VPNGate 一家公司）这个软件搭建的 OpenVpn 服务器。

## 未来的翻墙方式

天朝网络的严峻形势，大家有目共睹。未来的墙必定会不断加高，而新的翻墙方式有待人们的探索。

### 白名单制

假设某日天朝石乐志，把 GFW 调成了白名单制……或者学习朝鲜好榜样……还是有办法的是吧……？

 - 卫星通信。他们砍得断海底光纤，还打得掉通信卫星么？氪一套卫星上网设备，网速照样能看 Youtube 144P【滑稽】不过呢，鉴于文革期间“收听敌台”都能被发现，现今还要和敌台双工通信，可能更容易被抓吧……
 - 国际长途拨号上网。嗯，理论上可行，专属于壕的翻墙方式。

### 非白名单制

前一阵，网络上出现了 SS 即将被精准识别的流言。不论真假，假设 SS 被有效封杀，而尚未实行白名单制，有以下的思路可以翻墙：

 - 挂着 Windows 远程桌面上网。在国外买台 Windows VPS 服务器，RDP 连上去，打开 IE 看看 BBC，岂不美哉（并不）。
 - SSLVPN。没怎么看过 SSLVPN，但是如果能将翻墙流量包装到 HTTPS 或者 WSS 里，这样被精准识别的可能性将大大下降。
 - 各种点对点的隧道协议。与(2)思路相同，但并不借助已有的协议，而是新写各种奇奇怪怪的协议来包装流量。
